## Requirements

| Name | Version |
|------|---------|
| terraform | ~> 0.14.6 |
| aws | 3.26.0 |
| kubernetes | 2.0.2 |

## Providers

| Name | Version |
|------|---------|
| aws | 3.26.0 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| allowed\_account\_ids | List of allowed AWS account IDs | `list` | `[]` | no |
| allowed\_ips | IP addresses allowed to connect to private resources | `list(any)` | `[]` | no |
| az\_count | Count of avaiablity zones, min 2 | `number` | `3` | no |
| cidr | Default CIDR block for VPC | `string` | `"10.0.0.0/16"` | no |
| create\_acm\_certificate | Whether to create acm certificate or use existing | `bool` | `false` | no |
| create\_r53\_zone | Create R53 zone for main public domain | `bool` | `false` | no |
| domain\_name | Main public domain name | `any` | n/a | yes |
| ecr\_repo\_retention\_count | number of images to store in ECR | `number` | `50` | no |
| ecr\_repos | List of docker repositories | `list(any)` | <pre>[<br>  "demo"<br>]</pre> | no |
| eks\_cluster\_version | Version of the EKS K8S cluster | `string` | `"1.18"` | no |
| eks\_map\_roles | Additional IAM roles to add to the aws-auth configmap. | <pre>list(object({<br>    rolearn  = string<br>    username = string<br>    groups   = list(string)<br>  }))</pre> | `[]` | no |
| eks\_worker\_groups | EKS Worker groups configuration | `map` | <pre>{<br>  "ci": {<br>    "asg_desired_capacity": 0,<br>    "asg_max_size": 3,<br>    "asg_min_size": 0,<br>    "override_instance_types": [<br>      "t3.medium",<br>      "t3a.medium"<br>    ],<br>    "spot_instance_pools": 2<br>  },<br>  "ondemand": {<br>    "asg_desired_capacity": 1,<br>    "asg_max_size": 6,<br>    "instance_type": "t3a.medium"<br>  },<br>  "spot": {<br>    "asg_desired_capacity": 1,<br>    "asg_max_size": 5,<br>    "asg_min_size": 0,<br>    "override_instance_types": [<br>      "t3.medium",<br>      "t3a.medium"<br>    ],<br>    "spot_instance_pools": 2<br>  }<br>}</pre> | no |
| eks\_write\_kubeconfig | Flag for eks module to write kubeconfig | `bool` | `false` | no |
| environment | Env name in case workspace wasn't used | `string` | `"demo"` | no |
| name | Project name, required to form unique resource names | `any` | n/a | yes |
| region | Default infrastructure region | `string` | `"us-east-1"` | no |
| short\_region | The abbreviated name of the region, required to form unique resource names | `map` | <pre>{<br>  "ap-east-1": "ape1",<br>  "ap-northeast-1": "apn1",<br>  "ap-northeast-2": "apn2",<br>  "ap-south-1": "aps1",<br>  "ap-southeast-1": "apse1",<br>  "ap-southeast-2": "apse2",<br>  "ca-central-1": "cac1",<br>  "cn-north-1": "cnn1",<br>  "cn-northwest-1": "cnnw1",<br>  "eu-central-1": "euc1",<br>  "eu-north-1": "eun1",<br>  "eu-west-1": "euw1",<br>  "eu-west-2": "euw2",<br>  "eu-west-3": "euw3",<br>  "sa-east-1": "sae1",<br>  "us-east-1": "use1",<br>  "us-east-2": "use2",<br>  "us-gov-east-1": "usge1",<br>  "us-gov-west-1": "usgw1",<br>  "us-west-1": "usw1",<br>  "us-west-2": "usw2"<br>}</pre> | no |
| single\_nat\_gateway | Flag to create single nat gateway for all AZs | `bool` | `true` | no |
| zone\_id | R53 zone id for public domain | `any` | `null` | no |

## Outputs

| Name | Description |
|------|-------------|
| allowed\_ips | List of allowed ip's, used for direct ssh access to instances. |
| az\_count | Count of avaiablity zones, min 2 |
| domain\_name | Domain name |
| eks\_cluster\_endpoint | Endpoint for EKS control plane. |
| eks\_cluster\_id | n/a |
| eks\_cluster\_security\_group\_id | Security group ids attached to the cluster control plane. |
| eks\_config\_map\_aws\_auth | A kubernetes configuration to authenticate to this EKS cluster. |
| eks\_kubectl\_config | kubectl config as generated by the module. |
| eks\_kubectl\_console\_config | description |
| eks\_oidc\_provider\_arn | ARN of EKS oidc provider |
| env | Suffix for the hostname depending on workspace |
| name | Project name, required to form unique resource names |
| name\_wo\_region | Project name, required to form unique resource names without short region |
| region | Target region for all infrastructure resources |
| route53\_zone\_id | ID of domain zone |
| short\_region | The abbreviated name of the region, required to form unique resource names |
| ssl\_certificate\_arn | ARN of SSL certificate |
| vpc\_cidr | CIDR block of infra VPC |
| vpc\_database\_subnets | Database subnets of infra VPC |
| vpc\_id | ID of infra VPC |
| vpc\_intra\_subnets | Private intra subnets |
| vpc\_name | Name of infra VPC |
| vpc\_private\_subnets | Private subnets of infra VPC |
| vpc\_public\_subnets | Public subnets of infra VPC |

